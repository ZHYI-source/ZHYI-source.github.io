(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{312:function(s,a,n){"use strict";n.r(a);var t=n(10),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"server端介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server端介绍"}},[s._v("#")]),s._v(" SERVER端介绍")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://gitee.com/Z568_568/vue3-antd-plus.git",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue3-Antd-Plus"),a("OutboundLink")],1),s._v("的服务端")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("基于 Node.js、Express.js 和 MongoDB 通过Mongoose驱动进行 REST API 开发的轻量级样板。\n集成了Swagger UI、JWT、sessionMiddleware、发送邮箱验证、日志管理、统一的预定义状态码响应格式等，对于为前端平台构建纯净的Web API非常有用。")])]),s._v(" "),a("li",[a("p",[s._v("采用 MVC 模式搭建项目结构")])])]),s._v(" "),a("h2",{attrs:{id:"特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),a("hr"),s._v(" "),a("ul",[a("li",[s._v("轻量级Node.js项目提供Restful API")]),s._v(" "),a("li",[s._v("数据库采用 Mongodb, 通过Mongoose驱动。")]),s._v(" "),a("li",[s._v("CRUD操作示例")]),s._v(" "),a("li",[s._v("跨域处理")]),s._v(" "),a("li",[s._v("日志管理")]),s._v(" "),a("li",[s._v("具有恰当的状态代码的预定义响应结构")]),s._v(" "),a("li",[s._v("全局错误处理")]),s._v(" "),a("li",[s._v("增加express-validator请求参数校验")]),s._v(" "),a("li",[s._v("jwt验证 用户权限中间件分离")]),s._v(" "),a("li",[s._v("基本身份验证（采用bcrypt单向Hash加密算法加密密码进行注册/登录）")]),s._v(" "),a("li",[s._v("Token生成和校验请求头的authorization")]),s._v(" "),a("li",[s._v("集成swagger-ui")]),s._v(" "),a("li",[s._v("增加邮件验证码通知")]),s._v(" "),a("li",[s._v("sessionMiddleware 验证码校验")]),s._v(" "),a("li",[s._v("采用jest 接口单元测试")]),s._v(" "),a("li",[s._v("集成定时任务")])]),s._v(" "),a("h2",{attrs:{id:"目录说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录说明"}},[s._v("#")]),s._v(" 目录说明")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── config "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公共配置文件夹")]),s._v("\n│   ├── db.config.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库连接信息")]),s._v("\n│   ├── swagger.config.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接口文档配置文件")]),s._v("\n├── controllers "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 控制器文件夹 具体接口逻辑实现")]),s._v("\n├── db "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mongodb数据库连接池文件夹")]),s._v("\n├── logs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志文件夹")]),s._v("\n├── middlewares "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 中间件文件夹")]),s._v("\n│   ├── actionLogMiddleware.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录操作日志中间件")]),s._v("\n│   ├── authMiddleware.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 权限相关中间件")]),s._v("\n│   ├── sessionMiddleware.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# session中间件 验证码存储")]),s._v("\n│   ├── tokenAuthentication.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# token校验中间件")]),s._v("\n│   ├── uploadMiddleware.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件上传中间件")]),s._v("\n├── models "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库模型文件夹 数据表配置")]),s._v("\n├── routes "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 路由文件夹  具体接口地址配置信息")]),s._v("\n├── scheduler "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定时器文件夹")]),s._v("\n├── sql "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库文件sql")]),s._v("\n├── templates "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 代码生成器文件模板")]),s._v("\n├── uploads "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件上传后存放文件夹")]),s._v("\n├── utils "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工具类文件夹")]),s._v("\n├── .env.development "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发环境配置文件")]),s._v("\n├── .env.production "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生产环境配置文件")]),s._v("\n├── alias.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 路径别名配置文件")]),s._v("\n├── app.js "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目主入口文件")]),s._v("\n└──package.json "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目依赖文件配置")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h2",{attrs:{id:"运行项目前准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行项目前准备"}},[s._v("#")]),s._v(" 运行项目前准备：")]),s._v(" "),a("blockquote",[a("p",[s._v("首先确保您系统中安装了"),a("a",{attrs:{href:"http://www.mongodb.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mongodb"),a("OutboundLink")],1),s._v("，和"),a("a",{attrs:{href:"http://nodejs.org/",title:"Nodejs",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nodejs"),a("OutboundLink")],1),s._v("，一起准备完善之后。按照如下操作。\n有的同学启动会报错可能是依赖包的版本问题需要注意\n我的环境配置供参考")]),s._v(" "),a("ul",[a("li",[s._v("Node.js 14.18.1+")]),s._v(" "),a("li",[s._v("MongoDB 5.1+")])])]),s._v(" "),a("h2",{attrs:{id:"启动项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[s._v("#")]),s._v(" 启动项目")]),s._v(" "),a("ol",[a("li",[s._v("安装依赖 （如果已经安装可以直接进行下一步）\n切换值SERVER端根目录下输入启动命令")])]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("创建数据库ZHOUYI_DB-导入sql文件-生成数据表")])]),s._v(" "),a("li",[a("p",[s._v("回到项目修改数据库配置信息")])])]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("// .env.development文件中修改\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库主机及相关配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("localhost \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DB_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ZHOUYI_DB  //你创建的数据库名称  默认无用户密码\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("启动项目")])]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("启动项目成功示例")])]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("项目启动成功: http://localhost:3089/v1\n接口文档地址: http://localhost:3089/swagger\n连接开发环境数据库成功：ZHOUYI_DB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"如何增加新的model-数据表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何增加新的model-数据表"}},[s._v("#")]),s._v(" 如何增加新的model 数据表")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("只需在 "),a("code",[s._v("/models/v1/mapping/")]),s._v(" 中创建一个新文件，\n然后在控制器"),a("code",[s._v("/controllers/v1/")]),s._v("中创建一个对应新模型的新控制器的并使用。")]),s._v(" "),a("h2",{attrs:{id:"如何增加新的路由router-接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何增加新的路由router-接口"}},[s._v("#")]),s._v(" 如何增加新的路由router 接口")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("只需在 "),a("code",[s._v("/routes/v1/")]),s._v(" 中创建一个新文件，并且引入它对应的controllers进行使用，routes下面的文件 将被 "),a("code",[s._v("mount-routes")]),s._v("插件自动解析并以文件名作为api根路径，\n开发环境下会打印在终端上：")]),s._v(" "),a("div",{staticClass:"language-shell script line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("******************************************************\n                MoaJS Apis Dump\n******************************************************\n\n┌───────────────────────────────────────┬────────┬───────────────────────────────────────────┐\n│ File                                  │ Method │ Path                                      │\n├───────────────────────────────────────┼────────┼───────────────────────────────────────────┤\n│ ./routes/v1/blog/anouncements.js      │ post   │ /v1/blog/anouncements/list                │\n├───────────────────────────────────────┼────────┼───────────────────────────────────────────┤\n│ ./routes/v1/blog/anouncements.js      │ post   │ /v1/blog/anouncements/client/list         │\n├───────────────────────────────────────┼────────┼───────────────────────────────────────────┤\n│ ./routes/v1/blog/anouncements.js      │ post   │ /v1/blog/anouncements/client/home/list    │\n├───────────────────────────────────────┼────────┼───────────────────────────────────────────┤\n│ ./routes/v1/sys/visitors.js           │ get    │ /v1/sys/visitors/count                    │\n├───────────────────────────────────────┼────────┼───────────────────────────────────────────┤\n│ ./routes/v1/sys/visitors.js           │ get    │ /v1/sys/visitors/onlineCount              │\n├───────────────────────────────────────┼────────┼───────────────────────────────────────────┤\n│ ./routes/v1/sys/visitors.js           │ get    │ /v1/sys/visitors/ranking                  │\n└───────────────────────────────────────┴────────┴───────────────────────────────────────────┘\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h2",{attrs:{id:"如何增加新的控制器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何增加新的控制器"}},[s._v("#")]),s._v(" 如何增加新的控制器")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("只需在 "),a("code",[s._v("/controllers/v1/")]),s._v(" 中创建一个新文件即可，并且引入相关模型进行使用")]),s._v(" "),a("h2",{attrs:{id:"部署上线"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署上线"}},[s._v("#")]),s._v(" 部署上线")]),s._v(" "),a("p",[s._v("部署上线云服务器整个项目 （收费 200人名币）")]),s._v(" "),a("ul",[a("li",[s._v("需要可以联系我v 15186817850 （备注事由）")]),s._v(" "),a("li",[s._v("不接受请勿添加哈")])])])}),[],!1,null,null,null);a.default=e.exports}}]);